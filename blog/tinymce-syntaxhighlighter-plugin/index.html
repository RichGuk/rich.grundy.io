<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tinymce Syntaxhighlighter Plugin</title>
    
    <meta name="description" content="A simple plugin for tinymce that provides syntax highlighting.">
    
    <meta name="author" content="Richard Grundy">
    <link rel="author" href="https://plus.google.com/u/0/115833423324756942653/posts">
    <link href="http://www.richgrundy.com/blog/tinymce-syntaxhighlighter-plugin/" rel="canonical">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="alternate" type="application/rss+xml" title="Rich Grundy" href="http://www.richgrundy.com/feed.xml">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fluidbox/1.3.1/jquery.fluidbox.css">
    <link rel="stylesheet" href="/assets/application-9884be0a4e0e433a81e4b80dc1d36b65.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fluidbox/1.3.1/jquery.fluidbox.min.js"></script>
  </head>

  <body>
  <header class="site-header" role="banner">
      <div class="container">
        <a href="/" class="logo"><img src="/assets/logo-0bfb51528a70dbc5915d936bd925f070.png" alt="Rich Grundy" class="site-logo"></a>

        <nav role="navigiation">
          <ul class="site-nav">
            <li><a href="/about/">About</a>
            <li><a href="/blog/">Blog</a>
          </ul>
        </nav>
      </div>
    </header>

    

    <div class="site-content">
      <div class="container">
        <h1 class="post-title">Tinymce Syntaxhighlighter Plugin</h1>
<p class="post-meta">07 Apr 2008</p>

<div class="post">
<p>I went to integrate <a href="http://code.google.com/p/syntaxhighlighter/">Syntaxhighlighter</a> into the site tonight, something I&#39;d forgotten to do in the redesign and I thought it would be nice if I could just click a button in <a href="http://tinymce.moxiecode.com/">tinymce</a> and paste in the code, select a few options and click insert. Which of course is entirely possible so I&#39;ve written a tinymce plugin to do just that.</p>

<p>I did encounter one little bug writing the plugin. When inserting the pasted code it kept repeating itself if there was currently no content in the body of the textarea (tinymce). I finally managed to fix it by putting a space at the end of the variable I was trying to insert (and with the power of highlighting here&#39;s what that looked like).</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">textarea_output</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/textarea&gt; &#39;</span><span class="p">;</span> <span class="cm">/* Note space */</span>
<span class="nx">tinyMCEPopup</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s1">&#39;mceInsertContent&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">textarea_output</span><span class="p">);</span></code></pre></div>

<p>You can download the plugin from my <a href="http://github.com/RichGuk/syntaxhl/tree/master">github account</a></p>

<h2>Getting it to work</h2>

<p>First you need to download <a href="http://code.google.com/p/syntaxhighlighter/">Syntaxhighlighter</a> and get that working by including the CSS file and Javascript files.</p>

<h3>Extract the plugin</h3>

<p>Next you need to extract the plugin to your tinymce plugin directory. When extracted it should be something like this:
<strong>/path/to/tinymce/plugins/syntaxhl</strong></p>

<h3>Configure tinymce</h3>

<p>Finally we need to configure tinymce to use our plugin we also need to stop tinymce from stripping out &lt;textarea&gt;&lt;/textarea&gt; html tags as this is needed for Syntaxhighlighter.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">tinyMCE</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="nx">theme</span> <span class="o">:</span> <span class="s2">&quot;advanced&quot;</span><span class="p">,</span>
  <span class="nx">plugins</span> <span class="o">:</span> <span class="s2">&quot;syntaxhl&quot;</span><span class="p">,</span>
  <span class="nx">theme_advanced_buttons1</span> <span class="o">:</span> <span class="s2">&quot;bold,italic,underline,undo,redo,link,unlink,image,forecolor,styleselect,removeformat,cleanup,code, syntaxhl&quot;</span><span class="p">,</span>
  <span class="nx">theme_advanced_buttons2</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nx">theme_advanced_buttons3</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nx">remove_linebreaks</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">extended_valid_elements</span> <span class="o">:</span> <span class="s2">&quot;textarea[cols|rows|disabled|name|readonly|class]&quot;</span>
<span class="p">});</span></code></pre></div>

<p>We tell tinymce to use our plugin by adding <strong>syntaxhl</strong> to the plugins list and also adding the <strong>syntaxhl</strong> button to the buttons list also note that extended<em>valid</em>elements contains the textarea tag this tells tinymce to not remove it.</p>

<p>If all went well you should see a new highlighter icon button in tinymce and when you click it you should get a dialog popup allowing you to insert code into your content.</p>

<p>If you encounter any bugs then please create an issue on the <a href="http://github.com/RichGuk/syntaxhl/tree/master">github account</a> and any forks/patches are welcome!</p>

</div>

<div class="post-comments">
  Got any questions or comments? Drop me a message on <a href="http://twitter.com/RichGuk" rel="nofollow">Twitter (@RichGuk)</a>.
</div>

      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        &copy; Rich Grundy 2016.
      </div>
    </footer>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2160161-2', 'richgrundy.com');
      ga('send', 'pageview');
    </script>

    <script>
    $(function() {
        $('a[data-fluidbox]').fluidbox();
    });
    </script>
  </body>
</html>
